{"version":3,"file":"static/js/9530.0b641782.chunk.js","mappings":"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","sources":["App/logo.svg","App/oidc.tsx","keycloak-theme/login/valuesTransferredOverUrl.ts","App/App.tsx","App/index.ts"],"sourcesContent":["var _g;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 841.9 595.3\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"#61DAFB\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 420.9,\n    cy: 296.5,\n    r: 45.7\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M520.5 78.1z\"\n  }))));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.6ce24c58023cc2f8fd88fe9d219db6c6.svg\";\nexport { ForwardRef as ReactComponent };","import { useState, useContext, createContext, useEffect } from \"react\";\nimport Keycloak_js from \"keycloak-js\";\nimport { id } from \"tsafe/id\";\nimport { addParamToUrl } from \"powerhooks/tools/urlSearchParams\";\nimport type { ReturnType } from \"tsafe/ReturnType\";\nimport type { Param0 } from \"tsafe/Param0\";\nimport { assert } from \"tsafe/assert\";\nimport { createKeycloakAdapter } from \"keycloakify\";\nimport jwt_decode from \"jwt-decode\";\nimport { Evt } from \"evt\";\n\nexport declare type OidcClient = OidcClient.LoggedIn | OidcClient.NotLoggedIn;\n\nexport declare namespace OidcClient {\n    export type NotLoggedIn = {\n        isUserLoggedIn: false;\n        login: (params: {\n            //To prevent infinite loop if the user access a page that requires to\n            //be authenticated but cancel (clicks back). \n            doesCurrentHrefRequiresAuth: boolean;\n        }) => Promise<never>;\n    };\n\n    export type LoggedIn = {\n        isUserLoggedIn: true;\n        getAccessToken: () => string;\n        logout: (params: { redirectTo: \"home\" | \"current page\" }) => Promise<never>;\n        //If we have sent a API request to change user's email for example\n        //and we want that jwt_decode(oidcClient.getAccessToken()).email be the new email\n        //in this case we would call this method...\n        updateTokenInfos: () => Promise<void>;\n    };\n}\n\ntype Params = {\n    url: string;\n    realm: string;\n    clientId: string;\n    transformUrlBeforeRedirect?: (url: string) => string;\n    getUiLocales?: () => string;\n    log?: typeof console.log;\n};\n\nasync function createKeycloakOidcClient(params: Params): Promise<OidcClient> {\n    const {\n        url,\n        realm,\n        clientId,\n        transformUrlBeforeRedirect,\n        getUiLocales,\n        log\n    } = params;\n\n    const keycloakInstance = new Keycloak_js({ url, realm, clientId });\n\n    let redirectMethod: ReturnType<\n        Param0<typeof createKeycloakAdapter>[\"getRedirectMethod\"]\n    > = \"overwrite location.href\";\n\n    const isAuthenticated = await keycloakInstance\n        .init({\n            onLoad: \"check-sso\",\n            silentCheckSsoRedirectUri: `${window.location.origin}/silent-sso.html`,\n            responseMode: \"query\",\n            checkLoginIframe: false,\n            adapter: createKeycloakAdapter({\n                transformUrlBeforeRedirect: url =>\n                    [url]\n                        .map(transformUrlBeforeRedirect ?? (url => url))\n                        .map(\n                            getUiLocales === undefined ?\n                                (url => url) :\n                                url =>\n                                    addParamToUrl({\n                                        url,\n                                        \"name\": \"ui_locales\",\n                                        \"value\": getUiLocales()\n                                    }).newUrl\n                        )\n                    [0],\n                keycloakInstance,\n                getRedirectMethod: () => redirectMethod\n            })\n        })\n        .catch((error: Error) => error);\n\n    //TODO: Make sure that result is always an object.\n    if (isAuthenticated instanceof Error) {\n        throw isAuthenticated;\n    }\n\n    const login: OidcClient.NotLoggedIn[\"login\"] = async ({\n        doesCurrentHrefRequiresAuth\n    }) => {\n        if (doesCurrentHrefRequiresAuth) {\n            redirectMethod = \"location.replace\";\n        }\n\n        await keycloakInstance.login({ \"redirectUri\": window.location.href });\n\n        return new Promise<never>(() => { });\n    };\n\n    if (!isAuthenticated) {\n        return id<OidcClient.NotLoggedIn>({\n            \"isUserLoggedIn\": false,\n            login\n        });\n    }\n\n    let currentAccessToken = keycloakInstance.token!;\n\n    const oidcClient = id<OidcClient.LoggedIn>({\n        \"isUserLoggedIn\": true,\n        \"getAccessToken\": () => currentAccessToken,\n        \"logout\": async ({ redirectTo }) => {\n            await keycloakInstance.logout({\n                \"redirectUri\": (() => {\n                    switch (redirectTo) {\n                        case \"current page\":\n                            return window.location.href;\n                        case \"home\":\n                            return window.location.origin;\n                    }\n                })()\n            });\n\n            return new Promise<never>(() => { });\n        },\n        \"updateTokenInfos\": async () => {\n            await keycloakInstance.updateToken(-1);\n\n            currentAccessToken = keycloakInstance.token!;\n        }\n    });\n\n    (function callee() {\n        const msBeforeExpiration = jwt_decode<{ exp: number }>(currentAccessToken)[\"exp\"] * 1000 - Date.now();\n\n        setTimeout(async () => {\n\n            log?.(`OIDC access token will expire in ${minValiditySecond} seconds, waiting for user activity before renewing`);\n\n            await Evt.merge([\n                Evt.from(document, \"mousemove\"),\n                Evt.from(document, \"keydown\")\n            ]).waitFor();\n\n            log?.(\"User activity detected. Refreshing access token now\");\n\n            const error = await keycloakInstance.updateToken(-1).then(\n                () => undefined,\n                (error: Error) => error\n            );\n\n            if (error) {\n                log?.(\"Can't refresh OIDC access token, getting a new one\");\n                //NOTE: Never resolves\n                await login({ \"doesCurrentHrefRequiresAuth\": true });\n            }\n\n            currentAccessToken = keycloakInstance.token!;\n\n            callee();\n\n        }, msBeforeExpiration - minValiditySecond * 1000);\n    })();\n\n    return oidcClient;\n}\n\nconst minValiditySecond = 25;\n\nconst oidcClientContext = createContext<OidcClient | undefined>(undefined);\n\nexport function createOidcClientProvider(params: Params) {\n\n\n    const prOidcClient = createKeycloakOidcClient(params);\n\n    function OidcClientProvider(props: { children: React.ReactNode; }) {\n\n        const { children } = props;\n\n        const [oidcClient, setOidcClient] = useState<OidcClient | undefined>(undefined);\n\n        useEffect(() => {\n\n            prOidcClient.then(setOidcClient);\n\n        }, []);\n\n        if (oidcClient === undefined) {\n            return null;\n        }\n\n        return (\n            <oidcClientContext.Provider value={oidcClient}>\n                {children}\n            </oidcClientContext.Provider>\n        );\n\n    }\n\n    return { OidcClientProvider };\n\n}\n\nexport function useOidcClient() {\n    const oidcClient = useContext(oidcClientContext);\n    assert(oidcClient !== undefined);\n    return { oidcClient };\n}\n","import { kcContext } from \"./kcContext\";\nimport {\n    retrieveParamFromUrl,\n    addParamToUrl,\n    updateSearchBarUrl\n} from \"powerhooks/tools/urlSearchParams\";\nimport { capitalize } from \"tsafe/capitalize\";\n\nexport const { foo, addFooToQueryParams } = (() => {\n    const queryParamName = \"foo\";\n\n    type Type = { foo: number; };\n\n    const value = (()=> {\n\n        const unparsedValue = read({ queryParamName });\n\n        if( unparsedValue === undefined ){\n            return undefined;\n        }\n\n        return JSON.parse(unparsedValue) as Type;\n\n    })();\n\n    function addToUrlQueryParams(params: {\n        url: string;\n        value: Type;\n    }): string {\n        const { url, value } = params;\n\n        return addParamToUrl({\n            url,\n            \"name\": queryParamName,\n            \"value\": JSON.stringify(value)\n        }).newUrl;\n    }\n\n    const out = {\n        [queryParamName]: value,\n        [`add${capitalize(queryParamName)}ToQueryParams` as const]: addToUrlQueryParams\n    } as const;\n\n    return out;\n})();\n\nexport const { bar, addBarToQueryParams } = (() => {\n    const queryParamName = \"bar\";\n\n    type Type = string;\n\n    const value = (()=> {\n\n        const unparsedValue = read({ queryParamName });\n\n        if( unparsedValue === undefined ){\n            return undefined;\n        }\n\n        return JSON.parse(unparsedValue) as Type;\n\n    })();\n\n    function addToUrlQueryParams(params: {\n        url: string;\n        value: Type;\n    }): string {\n        const { url, value } = params;\n\n        return addParamToUrl({\n            url,\n            \"name\": queryParamName,\n            \"value\": JSON.stringify(value)\n        }).newUrl;\n    }\n\n    const out = {\n        [queryParamName]: value,\n        [`add${capitalize(queryParamName)}ToQueryParams` as const]: addToUrlQueryParams\n    } as const;\n\n    return out;\n})();\n\n\nfunction read(params: { queryParamName: string }): string | undefined {\n    if (kcContext === undefined || process.env.NODE_ENV !== \"production\") {\n        //NOTE: We do something only if we are really in Keycloak\n        return undefined;\n    }\n\n    const { queryParamName } = params;\n\n    read_from_url: {\n        const result = retrieveParamFromUrl({\n            \"url\": window.location.href,\n            \"name\": queryParamName\n        });\n\n        if (!result.wasPresent) {\n            break read_from_url;\n        }\n\n        const { newUrl, value: serializedValue } = result;\n\n        updateSearchBarUrl(newUrl);\n\n        localStorage.setItem(queryParamName, serializedValue);\n\n        return serializedValue;\n    }\n\n    //Reading from local storage\n    const serializedValue = localStorage.getItem(queryParamName);\n\n    if (serializedValue === null) {\n        throw new Error(\n            `Missing ${queryParamName} in URL when redirecting to login page`\n        );\n    }\n\n    return serializedValue;\n}\n","import \"./App.css\";\nimport logo from \"./logo.svg\";\nimport myimg from \"./myimg.png\";\nimport { createOidcClientProvider, useOidcClient } from \"./oidc\";\nimport { addFooToQueryParams, addBarToQueryParams } from \"../keycloak-theme/login/valuesTransferredOverUrl\";\nimport jwt_decode from \"jwt-decode\";\nimport { addParamToUrl } from \"powerhooks/tools/urlSearchParams\";\n\n//On older Keycloak version you need the /auth (e.g: http://localhost:8080/auth)\n//On newer version you must remove it (e.g: http://localhost:8080 )\nconst keycloakUrl = \"https://auth.code.gouv.fr/auth\";\nconst keycloakRealm = \"keycloakify\";\nconst keycloakClient= \"starter\";\n\nconst { OidcClientProvider } = createOidcClientProvider({\n    url: keycloakUrl,\n    realm: keycloakRealm,\n    clientId: keycloakClient,\n    //This function will be called just before redirecting, \n    //it should return the current langue. \n    //kcContext.locale.currentLanguageTag will be what this function returned just before redirecting.  \n    getUiLocales: () => \"en\",\n    transformUrlBeforeRedirect: url =>\n        [url]\n            //Instead of foo and bar you could have isDark for example or any other state that you wish to \n            //transfer from the main app to the login pages.\n            .map(url => addFooToQueryParams({ url, value: { foo: 42 } }))\n            .map(url => addBarToQueryParams({ url, value: \"value of bar transferred to login page\" }))\n        [0],\n    log: console.log\n});\n\nexport default function App() {\n    return (\n        <OidcClientProvider>\n            <ContextualizedApp />\n        </OidcClientProvider>\n    );\n}\n\nfunction ContextualizedApp() {\n\n    const { oidcClient } = useOidcClient();\n\n    let accountUrl = `${keycloakUrl}/realms/${keycloakRealm}/account`;\n\n    // Set the language the user will get on the account page\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"kc_locale\",\n        value: \"en\"\n    }).newUrl;\n\n    // Enable to redirect to the app from the account page we'll get the referrer_uri under kcContext.referrer.url\n    // It's useful to avoid hard coding the app url in the keycloak config\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"referrer\",\n        value: keycloakClient\n    }).newUrl;\n\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"referrer_uri\",\n        value: window.location.href\n    }).newUrl;\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                {\n                    oidcClient.isUserLoggedIn ?\n                        <>\n                            <h1>You are authenticated !</h1>\n                            {/* On older Keycloak version its /auth/realms instead of /realms */}\n                            <a href={accountUrl}>Link to your Keycloak account</a>\n                            <pre style={{ textAlign: \"left\" }}>{JSON.stringify(jwt_decode(oidcClient.getAccessToken()), null, 2)}</pre>\n                            <button onClick={() => oidcClient.logout({ redirectTo: \"home\" })}>Logout</button>\n                        </>\n                        :\n                        <>\n                            <button onClick={() => oidcClient.login({ doesCurrentHrefRequiresAuth: false })}>Login</button>\n                        </>\n                }\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                <img src={myimg} alt=\"test_image\" />\n                <p style={{ \"fontFamily\": '\"Work Sans\"' }}>Hello world</p>\n                <p>Check out all keycloak pages in the <a href=\"https://storybook.keycloakify.dev/storybook\">Storybook</a>!</p>\n                <p>Once you've identified the ones you want to customize run <code>npx eject-keycloak-page</code></p>\n            </header>\n        </div>\n    );\n}\n","import App from \"./App\";\nexport * from \"./App\";\n\nexport default App;\n"],"names":["_createKeycloakOidcClient","_asyncToGenerator","_regeneratorRuntime","mark","_callee5","params","url","realm","clientId","_transformUrlBeforeRedirect","getUiLocales","log","keycloakInstance","redirectMethod","isAuthenticated","login","currentAccessToken","oidcClient","wrap","_context5","prev","next","transformUrlBeforeRedirect","Keycloak_js","init","onLoad","silentCheckSsoRedirectUri","concat","window","location","origin","responseMode","checkLoginIframe","adapter","createKeycloakAdapter","map","undefined","addParamToUrl","newUrl","getRedirectMethod","catch","error","sent","Error","_ref2","_callee","_ref","_context","doesCurrentHrefRequiresAuth","href","abrupt","Promise","stop","_x2","apply","arguments","id","token","_logout","_callee2","_ref3","redirectTo","_context2","logout","_x3","_updateTokenInfos","_callee3","_context3","updateToken","callee","msBeforeExpiration","jwt_decode","Date","now","setTimeout","_callee4","_context4","minValiditySecond","Evt","document","waitFor","then","oidcClientContext","createContext","_out","queryParamName","value","unparsedValue","read","JSON","parse","out","_defineProperty","capitalize","stringify","addFooToQueryParams","foo","_out2","addBarToQueryParams","bar","kcContext","result","retrieveParamFromUrl","wasPresent","serializedValue","updateSearchBarUrl","localStorage","setItem","getItem","keycloakUrl","keycloakRealm","keycloakClient","_createOidcClientProv","prOidcClient","_x","createKeycloakOidcClient","OidcClientProvider","props","children","_useState","useState","_useState2","_slicedToArray","setOidcClient","useEffect","_jsx","Provider","createOidcClientProvider","console","ContextualizedApp","_useOidcClient","useContext","assert","useOidcClient","accountUrl","name","className","_jsxs","isUserLoggedIn","_Fragment","style","textAlign","getAccessToken","onClick","src","logo","alt","myimg"],"sourceRoot":""}